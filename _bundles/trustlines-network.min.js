!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("TLNetwork",[],e):"object"==typeof exports?exports.TLNetwork=e():t.TLNetwork=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=45)}([function(t,e,r){"use strict";(function(t){var r="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=void 0!==t&&t,i=r||o||n;e.root=i,function(){if(!i)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(e,r(44))},function(t,e,r){"use strict";var n=r(0),o=r(42),i=r(5),s=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=o.toSubscriber(t,e,r);if(n?n.call(i,this.source):i.add(this.source?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?e=n.root.Rx.config.Promise:n.root.Promise&&(e=n.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var o;o=r.subscribe(function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[i.observable]=function(){return this},t.create=function(e){return new t(e)},t}();e.Observable=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),i=r(4),s=r(3),c=r(6),u=function(t){function e(r,n,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!r){this.destination=s.empty;break}if("object"==typeof r){r instanceof e?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new a(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new a(this,r,n,o)}}return n(e,t),e.prototype[c.rxSubscriber]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,e=t._parent,r=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=r,this},e}(i.Subscription);e.Subscriber=u;var a=function(t){function e(e,r,n,i){t.call(this),this._parentSubscriber=e;var c,u=this;o.isFunction(r)?c=r:r&&(c=r.next,n=r.error,i=r.complete,r!==s.empty&&(u=Object.create(r),o.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=c,this._error=n,this._complete=i}return n(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u)},function(t,e,r){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,r){"use strict";function n(t){return t.reduce(function(t,e){return t.concat(e instanceof a.UnsubscriptionError?e.errors:e)},[])}var o=r(8),i=r(10),s=r(9),c=r(43),u=r(7),a=r(35),h=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this,h=r._parent,f=r._parents,l=r._unsubscribe,p=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var d=-1,y=f?f.length:0;h;)h.remove(this),h=++d<y&&f[d]||null;if(s.isFunction(l)){var b=c.tryCatch(l).call(this);b===u.errorObject&&(e=!0,t=t||(u.errorObject.e instanceof a.UnsubscriptionError?n(u.errorObject.e.errors):[u.errorObject.e]))}if(o.isArray(p))for(d=-1,y=p.length;++d<y;){var v=p[d];if(i.isObject(v)){var b=c.tryCatch(v.unsubscribe).call(v);if(b===u.errorObject){e=!0,t=t||[];var w=u.errorObject.e;w instanceof a.UnsubscriptionError?t=t.concat(n(w.errors)):t.push(w)}}}if(e)throw new a.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this,r=e._parent,n=e._parents;r&&r!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();e.Subscription=h},function(t,e,r){"use strict";function n(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}var o=r(0);e.getSymbolObservable=n,e.observable=n(o.root),e.$$observable=e.observable},function(t,e,r){"use strict";var n=r(0),o=n.root.Symbol;e.rxSubscriber="function"==typeof o&&"function"==typeof o.for?o.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,r){"use strict";e.errorObject={e:{}}},function(t,e,r){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,r){"use strict";function n(t){return"function"==typeof t}e.isFunction=n},function(t,e,r){"use strict";function n(t){return null!=t&&"object"==typeof t}e.isObject=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(12),o=r(19),i=r(17),s=r(16),c=r(18),u=r(14),a=r(13),h=r(20),f=r(15),l=function(){function t(t){void 0===t&&(t={});var e=t.host,r=t.port,l=(t.tokenAddress,t.pollInterval),p=t.useWebSockets;this.configuration=new n.Configuration(e,r,l,p),this.user=new o.User,this.utils=new h.Utils(this.configuration),this.currencyNetwork=new u.CurrencyNetwork(this.user,this.utils),this.event=new f.Event(this.utils,this.currencyNetwork,this.user),this.contact=new a.Contact(this.currencyNetwork,this.user,this.utils),this.transaction=new i.Transaction(this.user,this.utils,this.currencyNetwork),this.trustline=new c.Trustline(this.user,this.utils,this.transaction,this.currencyNetwork),this.payment=new s.Payment(this.user,this.utils,this.transaction,this.currencyNetwork)}return t.prototype.createUser=function(t,e){var r=this;return this.user.username=t,new Promise(function(t,e){r.user.generateKey().then(function(e){r.user.address=e;var n={username:r.user.username,address:r.user.address,keystore:r.user.keystore.serialize()};t(n)}).catch(function(t){e(t)})})},t.prototype.loadUser=function(t,e){var r=this;return new Promise(function(n,o){if(t){r.user.keystore=r.user.deserializeKeystore(t),r.user.address=r.user.keystore.getAddresses()[0];var i={username:r.user.username,address:r.user.address,keystore:r.user.keystore.serialize()};r.currencyNetwork.getAll().then(function(t){r.currencyNetwork.networks=t,r.currencyNetwork.defaultNetwork=e||t[0].address,n(i)})}else o(new Error("No valid keystore"))})},t}();e.TLNetwork=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r,n){void 0===t&&(t="localhost"),void 0===e&&(e=5e3),void 0===r&&(r=500),void 0===n&&(n=!1),this.host=t,this.port=e,this.pollInterval=r,this.useWebSockets=n,this.apiUrl="http://"+this.host+":"+this.port+"/",this.wsApiUrl="ws://"+this.host+":"+this.port+"/"}return t}();e.Configuration=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r){this.currencyNetwork=t,this.user=e,this.utils=r}return t.prototype.getAll=function(){var t=this,e=t.user,r=t.utils,n=t.currencyNetwork,o="networks/"+n.defaultNetwork+"/users/0x"+e.address+"/contacts";return r.fetchUrl(o)},t}();e.Contact=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.user=t,this.utils=e}return t.prototype.getAll=function(){return this.utils.fetchUrl("networks")},t.prototype.getInfo=function(t){var e=t||this.defaultNetwork;return this.utils.fetchUrl("networks/"+e)},t.prototype.getUsers=function(t){t||this.defaultNetwork;return this.utils.fetchUrl("networks/"+t+"/users")},t.prototype.getUserOverview=function(t,e){var r=t||this.defaultNetwork,n=e||this.user.address;return this.utils.fetchUrl("networks/"+r+"/users/0x"+n)},t}();e.CurrencyNetwork=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r){this.utils=t,this.currencyNetwork=e,this.user=r,this.validParameters=["type","fromBlock","toBlock"]}return t.prototype.eventObservable=function(t){var e=this,r=e.currencyNetwork,n=e.user,o=e.utils,i=e.validParameters,s="networks/"+r.defaultNetwork+"/users/0x"+n.address+"/events",c=o.buildUrl(s,i,t);return o.createObservable(c)},t.prototype.get=function(t){var e=this,r=e.currencyNetwork,n=e.user,o=e.utils,i=e.validParameters,s="networks/"+r.defaultNetwork+"/users/0x"+n.address+"/events",c=o.buildUrl(s,i,t);return o.fetchUrl(c)},t}();e.Event=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r,n){this.user=t,this.utils=e,this.transaction=r,this.currencyNetwork=n}return t.prototype.prepareTransfer=function(t,e){var r=this;return this.getPath(this.user.address,t,e).then(function(n){return n.path.length>0?r.transaction.prepareTransaction("mediatedTransfer",["0x"+t,e,n.path.slice(1)]):Promise.reject("Could not find a path with enough capacity")})},t.prototype.getPath=function(t,e,r){var n="networks/"+this.currencyNetwork.defaultNetwork+"/users/0x"+t+"/path/0x"+e;return this.utils.fetchUrl(n)},t}();e.Payment=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r){this.user=t,this.utils=e,this.currencyNetwork=r}return t.prototype.prepareTransaction=function(t,e){var r=this;return Promise.all([this.getAbi(),this.getTxInfos(this.user.address)]).then(function(n){var o=n[0],i=n[1],s={gasPrice:i.gasPrice,gasLimit:1e6,value:0,nonce:i.nonce,to:r.currencyNetwork.defaultNetwork};return{rawTx:lightwallet.txutils.functionTx(o,t,e,s),gasPrice:i.gasPrice,nonce:i.nonce,gas:2e5}})},t.prototype.confirmTransaction=function(t){var e=this;return this.user.signTx(t).then(function(t){return e.relayTx(t)})},t.prototype.getAbi=function(){return this.utils.fetchUrl("tokenabi")},t.prototype.getTxInfos=function(t){return this.utils.fetchUrl("txinfos/0x"+t)},t.prototype.relayTx=function(t){return this.utils.fetchUrl("relay")},t.prototype.handleError=function(t){return Promise.reject(t.json().message||t)},t}();e.Transaction=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r,n){this.user=t,this.utils=e,this.transaction=r,this.currencyNetwork=n}return t.prototype.prepareUpdate=function(t,e){var r=this,n=r.transaction;r.user;return n.prepareTransaction("updateCreditline",["0x"+t,e])},t.prototype.prepareAccept=function(t){var e=this,r=e.transaction;e.user;return r.prepareTransaction("acceptCreditline",["0x"+t])},t.prototype.getAll=function(){var t=this,e=t.user,r=t.utils,n=t.currencyNetwork;return r.fetchUrl("networks/"+n.defaultNetwork+"/users/0x"+e.address+"/trustlines")},t.prototype.get=function(t){var e=this,r=e.user,n=e.utils,o=e.currencyNetwork;return n.fetchUrl("networks/"+o.defaultNetwork+"/users/0x"+r.address+"/trustlines/"+t)},t}();e.Trustline=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._password="ts"}return t.prototype.generateKey=function(){var t=this;return new Promise(function(e,r){var n=lightwallet.keystore.generateRandomSeed();lightwallet.keystore.createVault({password:t._password,seedPhrase:n},function(n,o){n&&r(n),t.keystore=o,o.keyFromPassword(t._password,function(n,o){n&&r(n),t.keystore.generateNewAddress(o);var i=t.keystore.getAddresses()[0];e(i)})})})},t.prototype.deserializeKeystore=function(t){return lightwallet.keystore.deserialize(t)},t.prototype.signTx=function(t){var e=this;return new Promise(function(r,n){e.keystore.keyFromPassword(e._password,function(o,i){o?n(o):r(lightwallet.signing.signTx(e.keystore,i,t,e.address))})})},t.prototype.onboardUser=function(t){},t}();e.User=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(27);r(26),r(25);var i=r(21),s=function(){function t(t){this.configuration=t}return t.prototype.createObservable=function(t){var e=this.configuration,r=e.useWebSockets,s=e.apiUrl,c=e.wsApiUrl,u=e.pollInterval;return r&&"WebSocket"in window?n.Observable.create(function(e){var r=new i(""+c+t);return r.onmessage=function(t){var r=JSON.parse(t.data);e.next(r)},r.onerror=function(t){console.error("An web socket error occured")},function(){r.close(1e3,"",{keepClosed:!0})}}):o.TimerObservable.create(0,u).mergeMap(function(){return fetch(""+s+t).then(function(t){return t.json()}).catch(function(t){return new Error("Could not get events")})})},t.prototype.fetchUrl=function(t,e){var r=this.configuration.apiUrl;return fetch(""+r+t,e).then(function(t){return t.json()}).then(function(t){return t}).catch(function(t){return Promise.reject(t.json().message||t)})},t.prototype.buildUrl=function(t,e,r){if(!r||"object"!=typeof r)return t;for(var n in r)r[n]&&-1!==e.indexOf(n)&&(t+=-1===t.indexOf("?")?"?":"&",t+=n+"="+r[n]);return t},t}();e.Utils=s},function(t,e,r){"use strict";var n=function(t){return t&&2===t.CLOSING},o=function(){return"undefined"!=typeof WebSocket&&n(WebSocket)},i=function(){return{constructor:o()?WebSocket:null,maxReconnectionDelay:1e4,minReconnectionDelay:1500,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,debug:!1}},s=function(t,e,r){Object.defineProperty(e,r,{get:function(){return t[r]},set:function(e){t[r]=e},enumerable:!0,configurable:!0})},c=function(t){return t.minReconnectionDelay+Math.random()*t.minReconnectionDelay},u=function(t,e){var r=e*t.reconnectionDelayGrowFactor;return r>t.maxReconnectionDelay?t.maxReconnectionDelay:r},a=["onopen","onclose","onmessage","onerror"],h=function(t,e,r){Object.keys(r).forEach(function(e){r[e].forEach(function(r){var n=r[0],o=r[1];t.addEventListener(e,n,o)})}),e&&a.forEach(function(r){t[r]=e[r]})},f=function(t,e,r){var o=this;void 0===r&&(r={});var a,l,p=0,d=0,y=!0,b=null,v={};if(!(this instanceof f))throw new TypeError("Failed to construct 'ReconnectingWebSocket': Please use the 'new' operator");var w=i();if(Object.keys(w).filter(function(t){return r.hasOwnProperty(t)}).forEach(function(t){return w[t]=r[t]}),!n(w.constructor))throw new TypeError("Invalid WebSocket constructor. Set `options.constructor`");var _=w.debug?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return console.log.apply(console,["RWS:"].concat(t))}:function(){},m=function(t,e){return setTimeout(function(){var r=new Error(e);r.code=t,Array.isArray(v.error)&&v.error.forEach(function(t){return(0,t[0])(r)}),a.onerror&&a.onerror(r)},0)},x=function(){if(_("handleClose",{shouldRetry:y}),d++,_("retries count:",d),d>w.maxRetries)return void m("EHOSTDOWN","Too many failed connection attempts");p=p?u(w,p):c(w),_("handleClose - reconnectDelay:",p),y&&setTimeout(g,p)},g=function(){if(y){_("connect");var r=a;a=new w.constructor(t,e),l=setTimeout(function(){_("timeout"),a.close(),m("ETIMEDOUT","Connection timeout")},w.connectionTimeout),_("bypass properties");for(var n in a)["addEventListener","removeEventListener","close","send"].indexOf(n)<0&&s(a,o,n);a.addEventListener("open",function(){clearTimeout(l),_("open"),p=c(w),_("reconnectDelay:",p),d=0}),a.addEventListener("close",x),h(a,r,v),a.onclose=a.onclose||b,b=null}};_("init"),g(),this.close=function(t,e,r){void 0===t&&(t=1e3),void 0===e&&(e="");var n=void 0===r?{}:r,o=n.keepClosed,i=void 0!==o&&o,s=n.fastClose,c=void 0===s||s,u=n.delay,h=void 0===u?0:u;if(_("close - params:",{reason:e,keepClosed:i,fastClose:c,delay:h}),y=!i,h&&(p=h),a.close(t,e),c){var f={code:t,reason:e,wasClean:!0};x(),a.removeEventListener("close",x),Array.isArray(v.close)&&v.close.forEach(function(t){var e=t[0],r=t[1];e(f),a.removeEventListener("close",e,r)}),a.onclose&&(b=a.onclose,a.onclose(f),a.onclose=null)}},this.send=function(t){a.send(t)},this.addEventListener=function(t,e,r){Array.isArray(v[t])?v[t].some(function(t){return t[0]===e})||v[t].push([e,r]):v[t]=[[e,r]],a.addEventListener(t,e,r)},this.removeEventListener=function(t,e,r){Array.isArray(v[t])&&(v[t]=v[t].filter(function(t){return t[0]!==e})),a.removeEventListener(t,e,r)}};t.exports=f},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(2),i=function(t){function e(e,r,n){t.call(this),this.parent=e,this.outerValue=r,this.outerIndex=n,this.index=0}return n(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(o.Subscriber);e.InnerSubscriber=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(2),i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(o.Subscriber);e.OuterSubscriber=i},function(t,e,r){"use strict";var n=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=n},function(t,e,r){"use strict";var n=r(1),o=r(28);n.Observable.prototype.map=o.map},function(t,e,r){"use strict";var n=r(1),o=r(29);n.Observable.prototype.mergeMap=o.mergeMap,n.Observable.prototype.flatMap=o.mergeMap},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(38),i=r(1),s=r(33),c=r(40),u=r(37),a=function(t){function e(e,r,n){void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,o.isNumeric(r)?this.period=Number(r)<1&&1||Number(r):c.isScheduler(r)&&(n=r),c.isScheduler(n)||(n=s.async),this.scheduler=n,this.dueTime=u.isDate(e)?+e-this.scheduler.now():e}return n(e,t),e.create=function(t,r,n){return void 0===t&&(t=0),new e(t,r,n)},e.dispatch=function(t){var e=t.index,r=t.period,n=t.subscriber,o=this;if(n.next(e),!n.closed){if(-1===r)return n.complete();t.index=e+1,o.schedule(t,r)}},e.prototype._subscribe=function(t){var r=this,n=r.period,o=r.dueTime;return r.scheduler.schedule(e.dispatch,o,{index:0,period:n,subscriber:t})},e}(i.Observable);e.TimerObservable=a},function(t,e,r){"use strict";function n(t,e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new s(t,e))}var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(2);e.map=n;var s=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project,this.thisArg))},t}();e.MapOperator=s;var c=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.count=0,this.thisArg=n||this}return o(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.Subscriber)},function(t,e,r){"use strict";function n(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof e&&(r=e,e=null),this.lift(new c(t,e,r))}var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(41),s=r(23);e.mergeMap=n;var c=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.resultSelector,this.concurrent))},t}();e.MergeMapOperator=c;var u=function(t){function e(e,r,n,o){void 0===o&&(o=Number.POSITIVE_INFINITY),t.call(this,e),this.project=r,this.resultSelector=n,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return o(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){this.add(i.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,o){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,r,n){var o;try{o=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(o)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(s.OuterSubscriber);e.MergeMapSubscriber=u},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(4),i=function(t){function e(e,r){t.call(this)}return n(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(o.Subscription);e.Action=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(0),i=r(30),s=function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.work=r,this.pending=!1}return n(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),o.root.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending?e:o.root.clearInterval(e)&&void 0||void 0},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(i.Action);e.AsyncAction=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(24),i=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return n(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)return void e.push(t);var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}},e}(o.Scheduler);e.AsyncScheduler=i},function(t,e,r){"use strict";var n=r(31),o=r(32);e.async=new o.AsyncScheduler(n.AsyncAction)},function(t,e,r){"use strict";function n(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var r=t.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var o=Object.getOwnPropertyNames(n.prototype),i=0;i<o.length;++i){var s=o[i];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}var o=r(0);e.symbolIteratorPonyfill=n,e.iterator=n(o.root),e.$$iterator=e.iterator},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return n(e,t),e}(Error);e.UnsubscriptionError=o},function(t,e,r){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length}},function(t,e,r){"use strict";function n(t){return t instanceof Date&&!isNaN(+t)}e.isDate=n},function(t,e,r){"use strict";function n(t){return!o.isArray(t)&&t-parseFloat(t)+1>=0}var o=r(8);e.isNumeric=n},function(t,e,r){"use strict";function n(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}e.isPromise=n},function(t,e,r){"use strict";function n(t){return t&&"function"==typeof t.schedule}e.isScheduler=n},function(t,e,r){"use strict";function n(t,e,r,n){var l=new h.InnerSubscriber(t,r,n);if(l.closed)return null;if(e instanceof u.Observable)return e._isScalar?(l.next(e.value),l.complete(),null):e.subscribe(l);if(i.isArrayLike(e)){for(var p=0,d=e.length;p<d&&!l.closed;p++)l.next(e[p]);l.closed||l.complete()}else{if(s.isPromise(e))return e.then(function(t){l.closed||(l.next(t),l.complete())},function(t){return l.error(t)}).then(null,function(t){o.root.setTimeout(function(){throw t})}),l;if(e&&"function"==typeof e[a.iterator])for(var y=e[a.iterator]();;){var b=y.next();if(b.done){l.complete();break}if(l.next(b.value),l.closed)break}else if(e&&"function"==typeof e[f.observable]){var v=e[f.observable]();if("function"==typeof v.subscribe)return v.subscribe(new h.InnerSubscriber(t,r,n));l.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var w=c.isObject(e)?"an invalid object":"'"+e+"'",_="You provided "+w+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";l.error(new TypeError(_))}}return null}var o=r(0),i=r(36),s=r(39),c=r(10),u=r(1),a=r(34),h=r(22),f=r(5);e.subscribeToResult=n},function(t,e,r){"use strict";function n(t,e,r){if(t){if(t instanceof o.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||r?new o.Subscriber(t,e,r):new o.Subscriber(s.empty)}var o=r(2),i=r(6),s=r(3);e.toSubscriber=n},function(t,e,r){"use strict";function n(){try{return i.apply(this,arguments)}catch(t){return s.errorObject.e=t,s.errorObject}}function o(t){return i=t,n}var i,s=r(7);e.tryCatch=o},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){t.exports=r(11)}])});
//# sourceMappingURL=trustlines-network.min.js.map